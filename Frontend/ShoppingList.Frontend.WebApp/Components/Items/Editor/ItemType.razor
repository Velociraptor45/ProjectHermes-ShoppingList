@using ProjectHermes.ShoppingList.Frontend.Models.Items;
@using ProjectHermes.ShoppingList.Frontend.WebApp.Pages.Items.Models
@using Models = ProjectHermes.ShoppingList.Frontend.Models.Items.Models;

<div class="itemType p-2 mt-2">
    <div class="d-flex">
        <div class="name">
            <Input @bind-Value="@itemType.Name"></Input>
        </div>
        <div class="ml-2 ml-auto">
            <Button Class="d-flex align-items-center"
                    OnClick="@OnRemoveItemTypeButtonClicked"
                    Danger="true">
                <Icon Type="minus"></Icon>
            </Button>
        </div>
    </div>
    <div class="availabilities">
        <Availabilities State="State"
                        Available="@itemType"></Availabilities>
    </div>
</div>

@code {
    [Parameter] public ItemsState State { get; set; }
    [Parameter] public int ComponentIndex { get; set; }

    private Models.ItemType itemType;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        itemType = State.EditedItem.ItemTypes[ComponentIndex];
    }

    private void OnRemoveItemTypeButtonClicked()
    {
        State.EditedItem.ItemTypes.RemoveAt(ComponentIndex);
        State.StateChanged();
    }
}
