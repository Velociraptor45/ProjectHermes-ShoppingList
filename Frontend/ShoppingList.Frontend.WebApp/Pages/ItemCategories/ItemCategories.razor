@page "/item-categories"

@inherits Fluxor.Blazor.Web.Components.FluxorComponent

@using Fluxor
@using ProjectHermes.ShoppingList.Frontend.Redux.ItemCategories.Actions
@using ProjectHermes.ShoppingList.Frontend.Redux.ItemCategories.States

@inject IState<ItemCategoryState> State
@inject IDispatcher Dispatcher

@namespace ProjectHermes.ShoppingList.Frontend.WebApp.Pages.ItemCategories

<div>
    <div class="d-flex">
        <div class="h4">ItemCategories</div>
        <Button @onclick="@OnCreateItemCategoryButtonClicked" Class="d-flex align-items-center ml-auto">
            <i class="bi bi-plus-lg"></i>
        </Button>
    </div>
    <div>
        <Input TValue="string" @bind-value="@input" 
               OnPressEnter="@OnLoadButtonClicked" 
               Placeholder="Item category name ..."></Input>
        <Button @onclick="@OnLoadButtonClicked" Class="mt-2">Load</Button>
    </div>
    <div>
        @foreach (var searchResult in State.Value.Search.SearchResults)
        {
            <SearchResult Model="searchResult" TAction="EditItemCategoryAction"></SearchResult>
        }
    </div>
</div>

@code {
    private string input = "";

    private void OnLoadButtonClicked()
    {
        Dispatcher.Dispatch(new SearchItemCategoriesAction(input));
    }
    private void OnCreateItemCategoryButtonClicked()
    {
        Dispatcher.Dispatch(new EditItemCategoryAction
        {
            Id = Guid.Empty
        });
    }
}